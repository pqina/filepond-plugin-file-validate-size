/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(e=e||self).FilePondPluginFileValidateSize=i()}(this,function(){"use strict";var e=function(e){var i=e.addFilter,E=e.utils,_=E.Type,l=E.replaceInString,t=E.toNaturalFileSize;return i("ALLOW_HOPPER_ITEM",function(e,i){var E=i.query;if(!E("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var _=E("GET_MAX_FILE_SIZE");if(null!==_&&e.size>_)return!1;var l=E("GET_MIN_FILE_SIZE");return!(null!==l&&e.size<l)}),i("LOAD_FILE",function(e,i){var E=i.query;return new Promise(function(i,_){if(!E("GET_ALLOW_FILE_SIZE_VALIDATION"))return i(e);var n=E("GET_FILE_VALIDATE_SIZE_FILTER");if(n&&!n(e))return i(e);var I=E("GET_MIME_FILE_SIZE");if(null!==I){var a=function(e){var i={b:1,kb:1e3,mb:Math.pow(1e3,2),gb:Math.pow(1e3,3),tb:Math.pow(1e3,4),pb:Math.pow(1e3,5)};return Number(e.match(/\d/).toString())*i[e.match(/[a-zA-Z]+/).toString().toLowerCase()]};Object.keys(I).forEach(function(i){(e.type===i||"/*"===i.substring(2,-2)&&e.type.split("/")[0]===i.slice(0,-2))&&e.size>a(I[i])&&_({status:{main:E("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:l(E("GET_LABEL_MAX_FILE_SIZE"),{filesize:t(a(I[i]),".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}})})}var L=E("GET_MAX_FILE_SIZE");if(null!==L&&e.size>L)_({status:{main:E("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:l(E("GET_LABEL_MAX_FILE_SIZE"),{filesize:t(L,".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}});else{var u=E("GET_MIN_FILE_SIZE");if(null!==u&&e.size<u)_({status:{main:E("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:l(E("GET_LABEL_MIN_FILE_SIZE"),{filesize:t(u,".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}});else{var S=E("GET_MAX_TOTAL_FILE_SIZE");if(null!==S)if(E("GET_ACTIVE_ITEMS").reduce(function(e,i){return e+i.fileSize},0)>S)return void _({status:{main:E("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:l(E("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:t(S,".",E("GET_FILE_SIZE_BASE"),E("GET_FILE_SIZE_LABELS",E))})}});i(e)}}})}),{options:{allowFileSizeValidation:[!0,_.BOOLEAN],mimeSizes:[null,_.OBJECT],maxFileSize:[null,_.INT],minFileSize:[null,_.INT],maxTotalFileSize:[null,_.INT],fileValidateSizeFilter:[null,_.FUNCTION],labelMinFileSizeExceeded:["File is too small",_.STRING],labelMinFileSize:["Minimum file size is {filesize}",_.STRING],labelMaxFileSizeExceeded:["File is too large",_.STRING],labelMaxFileSize:["Maximum file size is {filesize}",_.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",_.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",_.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});
